(this["webpackJsonpatoms-app"]=this["webpackJsonpatoms-app"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(7),o=n.n(l),c=(n(13),n(14),n(5)),i=n(1),u=n(2),s=n(3),p=n(4),h=function(e){Object(p.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"clicked",value:function(){this.props.onClick(this.props.line,this.props.column)}},{key:"render",value:function(){return a.a.createElement("button",{className:"cell ".concat(this.props.color," ").concat(this.props.color,"-").concat(this.props.value),onClick:this.clicked.bind(this)})}}]),n}(a.a.Component),f=function(e){Object(p.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={currentPlayer:"blue",allPlayersPlayed:!1,gameOver:!1,winner:null,cells:Array.from(Array(6),(function(e,t){return Array.from(new Array(10),(function(e,n){return{line:t,column:n,color:null,value:0,popping:!1}}))}))},r}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state.gameOver?"Game over":"Next player: "+this.state.currentPlayer;return a.a.createElement("div",null,a.a.createElement("div",{className:"status"},t),this.state.cells.map((function(t,n){return a.a.createElement("div",{key:"row"+n,className:"board-row"},t.map((function(t,r){return a.a.createElement(h,{key:"cell"+n+","+r,line:n,column:r,value:t.value,color:t.color,onClick:e.cellClicked.bind(e)})})))})))}},{key:"cellClicked",value:function(e,t){var n=this,r=this.state.cells[e][t];this.state.gameOver||null!==r.color&&r.color!==this.state.currentPlayer||this.setState((function(r){return{currentPlayer:"blue"===n.state.currentPlayer?"red":"blue",allPlayersPlayed:n.state.allPlayersPlayed||"red"===n.state.currentPlayer,cells:r.cells.map((function(n,a){return n.map((function(n,l){if(a===e&&l===t){var o=Object(c.a)({},n);return o.value=n.value+1,o.color=r.currentPlayer,o}return n}))}))}}))}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.cells.forEach((function(t,n){t.forEach((function(t,r){var a=e.getNeighbors(n,r);!t.popping&&t.value>=a.length&&(console.log("Pop!"),e.popCell(n,r))}))})),!this.state.gameOver&&this.state.allPlayersPlayed){var t=this.state.cells.reduce((function(e,t){return e+t.filter((function(e){return"blue"===e.color})).length}),0),n=this.state.cells.reduce((function(e,t){return e+t.filter((function(e){return"red"===e.color})).length}),0);console.log(t+" blue cells, "+n+" red cells"),t&&!n&&this.setState({gameOver:!0,winner:"blue"}),n&&!t&&this.setState({gameOver:!0,winner:"red"})}}},{key:"popCell",value:function(e,t){var n=this;this.setState((function(n){return{cells:n.cells.map((function(n){return n.map((function(n){if(n.line===e&&n.column===t){var r=Object(c.a)({},n);return r.popping=!0,r}return n}))}))}})),setTimeout((function(){n.executePop(e,t)}),350+300*Math.random())}},{key:"executePop",value:function(e,t){var n=this;this.setState((function(r){var a=JSON.parse(JSON.stringify(r.cells)),l=a[e][t],o=n.getNeighbors(e,t,a);return o.forEach((function(e){e.value=e.value+1,e.color=l.color})),l.value=l.value-o.length,0===l.value&&(l.color=null),l.popping=!1,{cells:a}}))}},{key:"popCellBefore",value:function(e,t){var n=this.state.cells[e][t],r=this.getNeighbors(e,t);if(!n.popping&&n.value>=r.length){this.setState({popping:!0});var a=this;setTimeout((function(){a.setState((function(e){return{popping:!1,count:e.count-r.length}})),r.forEach((function(e){e.setState((function(e){return{count:e.count+1}}))}))}),350)}}},{key:"getNeighbors",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.cells,r=[];return e>0&&r.push(n[e-1][t]),t>0&&r.push(n[e][t-1]),e+1<6&&r.push(n[e+1][t]),t+1<10&&r.push(n[e][t+1]),r}}]),n}(a.a.Component);var v=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(f,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.56ee3ae6.chunk.js.map